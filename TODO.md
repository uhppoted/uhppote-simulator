# TODO

- [ ] anti-passback (cf. https://github.com/uhppoted/uhppoted/issues/60)
      - [x] messages
      - [x] save/restore
      - [x] anti-passback
      - [x] clean up 'find card' logic in swipe
      - [x] CHANGELOG
      - [x] README
      - [x] antipassback per-instance mutex
      - [ ] validate against UHPPOTE controller
      - [x] crash:
```
panic: runtime error: invalid memory address or nil pointer dereference
[signal SIGSEGV: segmentation violation code=0x1 addr=0x30 pc=0x681b08]

goroutine 19 [running]:
github.com/uhppoted/uhppote-simulator/entities.(*AntiPassback).Get(0x47336c?)
      github.com/uhppoted/uhppote-simulator/entities/anti-passback.go:69 +0x28
...
```
      - (?) Replace global lock with external per controller lock
            - maybe time to think about a proper DB ?

## TODO

- [ ] Verify fields in listen events/status replies against SDK
      - Battery status can be (at least) 0x00, 0x01 and 0x04
- [ ] Replace UTO311L04.TimeOffset with time zone
- [ ] Unit tests for TaskList

### simulator
- [ ] concurrent requests
- [ ] simulator-cli
- [ ] Restructure so that events are generated by the simulator i.e. not by the actions
- [ ] HTML
- [ ] httpd
- [ ] Rework simulator.run to use rx channels
- [ ] Reload simulator on device file change
- [ ] Implement JSON unmarshal to initialise default values
- [ ] Swagger UI
- [ ] Autodetect gzipped files 
      - https://stackoverflow.com/questions/28309988/how-to-read-from-either-gzip-or-plain-text-reader-in-golang

### Documentation

- [ ] godoc
- [ ] build documentation
- [ ] install documentation
- [ ] user manuals
- [ ] man/info page

### Other

1.  Integration tests

